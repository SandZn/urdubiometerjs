!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";e.exports=class{constructor(e){console.log("hi"),this.graph=e._graph,this.onmatchRules=e._onmatch_rules.map(function(e){return{prevClasses:e[0],nextClasses:e[1],production:e[2]}}),this.onmatchRules_lookup=e._onmatch_rules_lookup,this.rules=e._rules.map(function(e){return{production:e[0],prevClasses:e[1],prevTokens:e[2],tokens:e[3],nextTokens:e[4],nextClasses:e[5],cost:e[6]}}),this.tokenizer=new RegExp(e._tokenizer_pattern,"g"),this.tokens=e._tokens;var t=e._whitespace;this.whitespace={default:t[0],tokenClass:t[1],consolidate:t[2]}}valueError(e){console.log(e)}tokenize(e){for(var t,n=this,r=[],s=[n.whitespace.default],o=[],i=0,l=!1,u=function(e){return n.tokens[e].includes(n.whitespace.tokenClass)};null!==(t=n.tokenizer.exec(e));)o.push(t),s.push(t[1]),t.index!==i&&n.ValueError("Unrecognized token at pos "+i+" of "+e),i=o[o.length-1].index+o[o.length-1][1].length;if(1===s.length)return n.ValueError("Unrecognized token at pos 0 of "+e),[];for(var a=0;a<s.length;a++){var h=s[a];if(u(h)){if(l&&n.whitespace.consolidate)continue;l=!0}else l=!1;r.push(h)}if(n.whitespace.consolidate)for(;u(r[r.length-1]);)r.pop();return r.push(n.whitespace.default),i!==e.length&&n.ValueError("Unrecognizable input at pos "+i+" of "+e),r}matchTokens(e,t,n,r,s){var o=this._input_tokens;if(n&&e<0)return!1;if(r&&e+t.length>o.length)return!1;for(var i=0;i<t.length;i++)if(s){if(!this.tokens[o[e+i]].includes(t[i]))return!1}else if(o[e+i]!==t[i])return!1;return!0}matchConstraints(e,t,n){var r,s,o,i,l=this.graph.edge[e][t].constraints;if(!l)return!0;for(var u in l)if(r=l[u],"prev_tokens"===u){if(i=n,i-=this.rules[this.graph.node[t].rule_key].tokens.length,i-=r.length,!this.matchTokens(i,r,!0,!1,!1))return!1}else if("next_tokens"===u){if(i=n,!this.matchTokens(i,r,!1,!0,!1))return!1}else if("prev_classes"===u){if(i=n,i-=this.rules[this.graph.node[t].rule_key].tokens.length,(s=l.prev_tokens)&&(i-=s.length),i-=r.length,!this.matchTokens(i,r,!0,!1,!0))return!1}else if("next_classes"===u&&(i=n,(o=l.next_tokens)&&(i+=o.length),!this.matchTokens(i,r,!1,!0,!0)))return!1;return!0}matchAt(e,t){if(t)var n=[];var r=this._input_tokens,s=this.graph,o=[],i=function(e,t){var n,i,l,u=null,a=s.node[e].ordered_children;if(a)if(u=a[r[t]])for(var h=u.length;h>=0;h--)n=u[h],o.push([n,e,t]);else if(i=a.__rules__)for(var c=i.length;c>=0;c--)l=i[c],o.push([l,e,t])};for(i(0,e);o.length>0;){var l=o.pop(),u=l[0],a=l[1];e=l[2];var h=s.node[u];if(h.accepting&&this.matchConstraints(a,u,e)){if(!t)return h.rule_key;n.append(h.rule_key)}else e<r.length-1&&(e+=1),i(u,e)}if(t)return n;this.ValueError("Could not match token "+r[e]+" at pos "+e+" in "+r)}parse(e){var t,n,r,s,o,i,l,u=this.tokenize(e),a="",h=1;for(this._input_tokens=u,this._ruleKeys=[];h<u.length-1;){if(i=this.matchAt(h),o=(l=this.rules[i]).tokens,this._ruleKeys.push(i),this.onmatchRules&&(t=null,n=u[h-1],r=u[h],(s=this.onmatchRules_lookup[r])&&(t=s[n]),t))for(var c=0;c<t.length;c++){var p=t[c],f=this.onmatchRules[p];if(this.matchTokens(h-f.prevClasses.length,f.prevClasses,!0,!1,!0)&&this.matchTokens(h,f.nextClasses,!1,!0,!0)){a+=f.production;break}}a+=l.production,h+=o.length}return a}}},function(e,t,n){"use strict";e.exports={GraphParser:n(0)}}]);
//# sourceMappingURL=urdubiometer.js.map